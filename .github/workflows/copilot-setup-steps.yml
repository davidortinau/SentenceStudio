name: "Copilot Setup Steps"

on: workflow_dispatch

jobs:
  copilot-setup-steps:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Setup .NET 9 and 10
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: |
          9.0.x
          10.0.x
        include-prerelease: true

    - name: Verify .NET installation
      run: dotnet --version

    - name: Install MAUI Android workloads
      run: dotnet workload install maui-android

    - name: List installed workloads
      run: dotnet workload list

    - name: Restore project dependencies
      run: dotnet restore src/SentenceStudio.sln

    - name: Build shared library
      run: dotnet build src/SentenceStudio.Shared/SentenceStudio.Shared.csproj --no-restore

    - name: Build service defaults
      run: dotnet build src/SentenceStudio.ServiceDefaults/SentenceStudio.ServiceDefaults.csproj --no-restore

    - name: Build web service defaults
      run: dotnet build src/SentenceStudio.WebServiceDefaults/SentenceStudio.WebServiceDefaults.csproj --no-restore

    - name: Build web application
      run: dotnet build src/SentenceStudio.Web/SentenceStudio.Web.csproj --no-restore

    - name: Build MAUI project (Android verification)
      run: dotnet build src/SentenceStudio/SentenceStudio.csproj -f net10.0-android --no-restore