@using Microsoft.AspNetCore.Components.Routing
@inject NavigationManager Nav
@inject IJSRuntime JS

<nav class="nav flex-column p-2 gap-1">
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="" Match="NavLinkMatch.All" title="Dashboard" @onclick="CloseOffcanvas">
        <i class="bi bi-house-door"></i> <span class="nav-label">Dashboard</span>
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="resources" title="Learning Resources" @onclick="CloseOffcanvas">
        <i class="bi bi-book"></i> <span class="nav-label">Learning Resources</span>
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="vocabulary" title="Vocabulary" @onclick="CloseOffcanvas">
        <i class="bi bi-card-text"></i> <span class="nav-label">Vocabulary</span>
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="minimal-pairs" title="Minimal Pairs" @onclick="CloseOffcanvas">
        <i class="bi bi-soundwave"></i> <span class="nav-label">Minimal Pairs</span>
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="skills" title="Skills" @onclick="CloseOffcanvas">
        <i class="bi bi-bullseye"></i> <span class="nav-label">Skills</span>
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="import" title="Import" @onclick="CloseOffcanvas">
        <i class="bi bi-box-arrow-in-down"></i> <span class="nav-label">Import</span>
    </NavLink>

    <hr class="my-2" style="border-color: var(--bs-border-color);" />

    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="profile" title="Profile" @onclick="CloseOffcanvas">
        <i class="bi bi-person"></i> <span class="nav-label">Profile</span>
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="settings" title="Settings" @onclick="CloseOffcanvas">
        <i class="bi bi-gear"></i> <span class="nav-label">Settings</span>
    </NavLink>
</nav>

@code {
    private async Task CloseOffcanvas()
    {
        try
        {
            await JS.InvokeVoidAsync("eval", "bootstrap.Offcanvas.getInstance(document.getElementById('mobileNav'))?.hide()");
        }
        catch { /* ignore on desktop where offcanvas doesn't exist */ }
    }
}
