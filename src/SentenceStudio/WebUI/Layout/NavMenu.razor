@using Microsoft.AspNetCore.Components.Routing
@inject NavigationManager Nav
@inject IJSRuntime JS

<nav class="nav flex-column p-2 gap-1">
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="" Match="NavLinkMatch.All" @onclick="CloseOffcanvas">
        <i class="bi bi-house-door me-2"></i> Dashboard
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="resources" @onclick="CloseOffcanvas">
        <i class="bi bi-book me-2"></i> Learning Resources
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="vocabulary" @onclick="CloseOffcanvas">
        <i class="bi bi-card-text me-2"></i> Vocabulary
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="minimal-pairs" @onclick="CloseOffcanvas">
        <i class="bi bi-soundwave me-2"></i> Minimal Pairs
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="skills" @onclick="CloseOffcanvas">
        <i class="bi bi-bullseye me-2"></i> Skills
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="import" @onclick="CloseOffcanvas">
        <i class="bi bi-box-arrow-in-down me-2"></i> Import
    </NavLink>

    <hr class="my-2" style="border-color: var(--ss-outline);" />

    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="profile" @onclick="CloseOffcanvas">
        <i class="bi bi-person me-2"></i> Profile
    </NavLink>
    <NavLink class="nav-link nav-link-ss rounded px-3 py-2" href="settings" @onclick="CloseOffcanvas">
        <i class="bi bi-gear me-2"></i> Settings
    </NavLink>
</nav>

@code {
    private async Task CloseOffcanvas()
    {
        try
        {
            await JS.InvokeVoidAsync("eval", "bootstrap.Offcanvas.getInstance(document.getElementById('mobileNav'))?.hide()");
        }
        catch { /* ignore on desktop where offcanvas doesn't exist */ }
    }
}
