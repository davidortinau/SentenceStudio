# Shadowing Activity Specification

## Activity Overview

The Shadowing Activity allows users to improve their pronunciation by listening to and repeating sentences spoken by native speakers. Users can hear proper pronunciation of vocabulary they've learned, practice speaking along with the audio, and gradually improve their fluency and intonation skills.

### Implemented Features

- The user can select Shadowing from the main page dashboard, and be navigated to the ShadowingPage activity.
- The user gets 10 sentences generated by the AI based on their selected vocabulary list and skill profile.
- Sentences are tailored to the user's native language and target language preferences.
- Each sentence includes:
  - Text in the target language (e.g., Korean)
  - Translation in the user's native language (e.g., English)
  - Pronunciation notes to guide proper delivery
- AI generates audio for each sentence on demand, using the TextToSpeech capability.
- Audio files are cached for performance and to reduce bandwidth usage.
- The user can navigate back and forward through the sentences.
- The user can play, pause, and replay the audio while reading the text.
- Activity completion is tracked in the user's activity history.

### Technical Implementation

- The feature uses a dedicated `ShadowingService` that generates sentences and audio.
- A custom prompt template (`GetShadowingSentences.scriban-txt`) guides the AI in creating appropriate sentences.
- The `ShadowingPage` component handles UI rendering and audio playback.
- Audio is streamed from the AI service and cached in memory for quick replay.
- The service automatically adapts to the user's language preferences from their profile.

## Future Enhancements

These are enhancements to be made to the feature in future iterations:

### Segmented Practice

**Short Clips:** Break audio into manageable segments (e.g., single sentences or phrases) so learners can focus on one manageable chunk at a time.

**Progressive Lengths:** Gradually increase the length of the audio segment as the learner's confidence grows.

### Slow vs. Native Speed

**Variable Playback Speed:** Provide an option to slow down the audio without distorting the pitch, so users can focus on accuracy first, then move on to native speed for fluency.

**Gradual Acceleration:** Allow learners to practice shadowing at a slower speed, then incrementally speed it up to match the native speaker's natural tempo.

### Visual Feedback

**Waveform Comparison:** Showing a visual waveform of the user's speech versus the native speaker's can be motivating and insightful. However, ensure that it's not overwhelming—highlight only key differences in intonation or emphasis.

**Pitch Contour or Intonation Graphs:** Beyond basic waveforms, pitch curves (e.g., using a spectrogram or pitch contour tool) can help learners see where they need to raise or lower their voice.

### Pronunciation Analysis

**Speech Recognition API:** Integrate a basic pronunciation scoring or feedback feature using speech-recognition technology to give suggestions on which syllables or phonemes might need extra practice.

**Targeted Exercises:** If the user consistently struggles with certain sounds (e.g., distinguishing between ㅂ/ㅃ or ㄷ/ㄸ in Korean), direct them to specific exercises on those sounds.

### Contextual Clarity

**Transcript & Translation:** Provide a transcript in Hangul alongside a translation. This way, learners understand the meaning of what they're shadowing and can connect pronunciation to comprehension.

## Useful User Feedback

### Intonation Heatmap

Show users where their voice pitch deviates significantly from the native speaker. For many learners, seeing where and how to adjust pitch is more tangible than just being told they're off.

### Segment-by-Segment Coaching

After each segment, highlight specific words or syllables that might need work. For example, if a learner's pitch is off for the second syllable in a phrase, display a note: "Watch your pitch on -가 here."

### Confidence Meter

Use an algorithm (based on duration, pitch alignment, and clarity) to provide a simple confidence score (e.g., 70% matched). Encourage learners to re-try until they reach a personal goal.